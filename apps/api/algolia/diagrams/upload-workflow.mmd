---
alt: "Upload workflow comparison: MCP vs script vs manual, with constraints and failure modes"
---
graph TD
    accTitle: Algolia Upload Workflow Options
    accDescr: Comparison of three upload paths (MCP, REST script, dashboard) with constraints, tradeoffs, and failure modes
    
    Trigger["Upload trigger<br/>(manual only, no auto-sync)"]:::trigger
    
    %% Three paths
    PathMCP{"MCP available?<br/>(dev env)"}:::decision
    PathScript{"Env vars set?<br/>(ALGOLIA_APPLICATION_ID,<br/>ALGOLIA_ADMIN_API_KEY)"}:::decision
    PathDashboard["Dashboard Manual Upload"]:::method
    
    %% MCP path
    MCP["MCP Tool Upload<br/>mcp_algolia-mcp_batch<br/>mcp_algolia-mcp_setSettings"]:::method
    MCPPros["+ No env var juggling<br/>+ Atomic operations<br/>+ Fast iteration"]:::pros
    MCPCons["- Dev only (not prod)<br/>- Requires MCP server"]:::cons
    
    %% Script path
    Script["REST API Script<br/>upload.sh<br/>(curl + jq)"]:::method
    ScriptPros["+ Reproducible<br/>+ CI-compatible<br/>+ Version controlled"]:::pros
    ScriptCons["- Requires .env setup<br/>- Manual env management"]:::cons
    
    %% Dashboard path
    DashPros["+ No tooling needed<br/>+ Visual interface"]:::pros
    DashCons["- Error-prone<br/>- Slow (copy-paste)<br/>- Non-reproducible<br/>- No audit trail"]:::cons
    
    %% Results
    SuccessMCP["Index + settings uploaded<br/>via MCP"]:::success
    SuccessScript["Index + settings uploaded<br/>via REST"]:::success
    SuccessDash["Index + settings uploaded<br/>manually"]:::success
    
    %% Constraints
    Constraints["CONSTRAINTS<br/>• Secrets in .env only<br/>• Never commit credentials<br/>• Manual trigger only<br/>• No auto-sync"]:::constraint
    
    %% Failure modes
    FailMCP["MCP unavailable<br/>→ fall back to script"]:::fail
    FailScript["Missing env vars<br/>→ fall back to dashboard"]:::fail
    FailDash["Dashboard error<br/>→ read docs, retry<br/>(no automated recovery)"]:::fail
    
    %% Flow
    Trigger --> PathMCP
    PathMCP -->|yes| MCP
    PathMCP -->|no| FailMCP
    
    MCP --> MCPPros
    MCP --> MCPCons
    MCPPros --> SuccessMCP
    MCPCons --> SuccessMCP
    
    FailMCP --> PathScript
    PathScript -->|yes| Script
    PathScript -->|no| FailScript
    
    Script --> ScriptPros
    Script --> ScriptCons
    ScriptPros --> SuccessScript
    ScriptCons --> SuccessScript
    
    FailScript --> PathDashboard
    PathDashboard --> DashPros
    PathDashboard --> DashCons
    DashPros --> SuccessDash
    DashCons --> SuccessDash
    
    SuccessDash -.-> FailDash
    
    Constraints -.->|enforced by| MCP
    Constraints -.->|enforced by| Script
    Constraints -.->|manual only| PathDashboard
    
    %% Styles - theme-agnostic
    classDef trigger fill:#6b7280,stroke:#4b5563,stroke-width:3px,color:#f9fafb
    classDef decision fill:#dc2626,stroke:#b91c1c,stroke-width:2px,color:#fef2f2
    classDef method fill:#0284c7,stroke:#0369a1,stroke-width:2px,color:#f0f9ff
    classDef pros fill:#059669,stroke:#047857,stroke-width:1px,color:#f0fdf4
    classDef cons fill:#ea580c,stroke:#c2410c,stroke-width:1px,color:#fff7ed
    classDef success fill:#10b981,stroke:#059669,stroke-width:2px,color:#f0fdf4
    classDef fail fill:#dc2626,stroke:#b91c1c,stroke-width:2px,color:#fef2f2
    classDef constraint fill:#7c3aed,stroke:#6d28d9,stroke-width:2px,color:#faf5ff
