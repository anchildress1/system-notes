# AGENTS.md for Algolia files

**Purpose:** AI-specific context for agents working in this repository. Focus on non-obvious implementation details and gotchas.

## Agent Identity

**Name:** Ruckus
**Role:** Ashley Childress's AI agent for traversing her knowledge graph
**Voice:** Direct, honest, technically precise, conversational (matching Ashley's style)

## Formatting Rules for `algolia_prompt.md`

- Never emphasize with formatting (no bold, italic, etc.)
- Use all caps as section headers
- Keep responses conversational and authentic to Ashley's voice

## Knowledge Graph Architecture

### Core Concept

This is a **unified knowledge graph**, not separate data silos. All indices (about, projects, blog_posts) are interconnected nodes that can be traversed via:

- `related_project_ids` - Links to related projects
- `related_facts` - Links to identity/principle facts
- `related_posts` - Links to blog posts
- `visual_refs` - Embedded artwork/visual asset URLs

### Directory Structure

- **`sources/`**: Hand-edited source data for projects and identity.
  - `about.json`: Biographical facts and identity rules.
  - `projects.json`: Core project metadata and links.
- **`config/`**: Algolia-specific configuration.
  - `*_settings.json`: Searchable attributes, ranking, and UI settings.
  - `*_synonyms.json`: Synonym definitions for each index.
- **`build/`**: Enriched build artifacts (generated by scripts).
  - `about.json`, `projects_enriched.json`, `blog_posts.json`.

### Synonym Strategy

**CRITICAL:** Search optimization happens via Algolia synonyms, NOT hardcoded in prompts.

- **`about_synonyms.json`**: Ashley identity (she/her, owner, creator), Ruckus, core concepts
- **`projects_synonyms.json`**: Project names, technical stack, Ruckus agent identity

Synonyms are uploaded to Algolia during indexing and handle:

- Pronoun mapping (she/her → Ashley)
- Role synonyms (owner, creator, author → Ashley)
- Agent identity (Ruckus, agent, assistant, bot)
- Technical term variations (Next.js, NextJS, React)

### Visual Asset Handling

**Visual assets are embedded, not separate indices.**

- Project banners: Stored in `apps/web/public/projects/`, referenced in `projects` records via `banner_image` and `thumbnail_url`
- Artwork: Stored in `apps/web/public/artwork/`, embedded in `about` records via `visual_refs` array
- **No artwork index exists** - artwork URLs are embedded references in fact records based on thematic mapping

### Data Flow

```
sources/about.json → build_knowledge_graph.py → build/about.json (with visual_refs)
sources/projects.json → build_knowledge_graph.py → build/projects_enriched.json (with banners)
sitemap.xml → blog crawler → build/blog_posts.json
```

## Index Descriptions

### `about`

**Description:** Identity facts, principles, philosophy with embedded visual references
**When to use:** User asks about Ashley's background, identity, work style, values. ALWAYS use for identity questions like "who are you" or "tell me about Ashley".
**Key Attributes:** `category`, `data`, `tags`, `related_project_ids`, `visual_refs`
**Synonyms:** Ashley pronouns (she/her), roles (owner, creator), Ruckus agent identity

### `projects`

**Description:** Software projects with visual assets (banners, thumbnails) and graph connections
**When to use:** User asks about work, codebases, "what have you built", specific tools
**Key Attributes:** `title`, `aliases`, `tags`, `summary`, `status`, `banner_image`, `thumbnail_url`, `related_project_ids`
**Visual Context:** Always include banner images in responses when available
**Synonyms:** Project name variations, technical stack terms, Ruckus

### `blog_posts`

**Description:** Blog articles from ashleychildress.com with cover images
**When to use:** User asks about writing, articles, specific topics Ashley has written about
**Key Attributes:** `title`, `url`, `published_date`, `cover_image`, `excerpt`
**Visual Context:** Include cover images when displaying blog posts

## Scripts & Maintenance

### `build_knowledge_graph.py`

Regenerates all knowledge graph indices from source data. Run when:

- Adding new artwork to `/public/artwork/`
- Updating `about.json` or `projects.json`
- Blog posts change significantly

**Key changes:**

- Scans artwork files and embeds URLs in `about` facts via `visual_refs`
- No longer generates separate artwork index
- Maps artwork to facts based on thematic categories

### `index_algolia.py`

Uploads indices to Algolia with settings and synonyms. Processes in order:

1. Projects (with synonyms)
2. About (with synonyms)
3. Blog posts

**Synonym upload:** Automatically applies synonyms from `config/*_synonyms.json` files

### `delete_algolia_indices.py`

Clean slate - deletes all indices. Use before major schema changes.

## Agent Configuration (Manual)

**Algolia Agent Studio** (ID: `11caec4a-abd5-439a-a66a-3c26562de5c1`)

- Dashboard: https://dashboard.algolia.com/apps/EXKENZ9FHJ/agent-studio
- System prompt source: `algolia_prompt.md`
- **No public API** for updating agent config - must use dashboard
- Image display fields must be configured manually in UI settings

## Common Gotchas

1. **Image URLs are relative** - stored as `/projects/banner.jpg`, not full URLs
2. **Artwork is embedded** - no separate artwork index, URLs embedded in `visual_refs` arrays
3. **Synonyms handle search** - don't duplicate synonym logic in prompts
4. **Blog post extraction** - relies on sitemap.xml structure, may break if blog platform changes
5. **Connection graph** - built but not actively used in search (future enhancement)
6. **Agent Studio API** - doesn't exist for configuration updates despite being "API-first"
7. **Ruckus identity** - agent name is "Ruckus", defined in prompt and synonyms
